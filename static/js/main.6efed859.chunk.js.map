{"version":3,"sources":["icons/nautilus-logo-icon.svg","scripts/blockchainParameters.ts","scripts/restApi.ts","scripts/smartcontractCompiler.ts","smartcontracts/phase1.ts","smartcontracts/phase2.ts","smartcontracts/phase3.ts","smartcontracts/ownerIndication.ts","smartcontracts/heirIndication.ts","smartcontracts/smartcontractsGenerator.ts","scripts/walletConnector.ts","components/CurrentInheritancesOverviewTable.tsx","components/CurrentInheritancesOverview.tsx","redux/reducer.ts","redux/AppContext.tsx","components/create_inheritance_form/AssetsSelected.tsx","components/WalletModal.tsx","pages/Layout.tsx","scripts/inERGitanceSettings.ts","scripts/transactionsBuilder.ts","pages/About.tsx","pages/Home.tsx","pages/HowItWorks.tsx","pages/MyInheritance.tsx","components/create_inheritance_form/TokensSelect.tsx","components/create_inheritance_form/FeesOverview.tsx","components/create_inheritance_form/Summary.tsx","components/CreateInheritanceForm.tsx","pages/CreateInheritance.tsx","pages/InheritancesOwner.tsx","pages/InheritanceHeir.tsx","App.tsx","index.tsx"],"names":["NANO_ERGS_IN_ONE_ERG","MIN_NANO_ERGS_IN_BOX","TRANSACTION_PHASE1_BLOCKCHAIN_FEE","TRANSACTION_OWNER_WITHDRAWAL_BLOCKCHAIN_FEE","EXPLORER_URL","NODE_URL","EXPLORER_TOKEN_INFO_PREFIX","EXPLORER_BLOKCHAIN_HEIGHT_PREFIX","EXPLORER_ASSET_SEARCH_PREFIX","EXPLORER_BOX_INFO_PREFIX","EXPLORER_BOXES_BY_ADDRESS_PREFIX","EXPLORER_TRANSACTION_INFO_PREFIX","NODE_COMPILE_P2S_ENDPOINT_PREFIX","get_request","url","fetch","request","json","result","post_request","body","method","headers","compile_ergoscript_to_p2s","script","data","JSON","stringify","source","address","phase1_ergoscript","phase2_ergoscript","phase3_ergoscript","ownerIndication_ergoscript","heirIndication_ergoscript","generate_phase1_p2s_address","generate_phase2_p2s_address","generate_phase3_p2s_address","generate_owners_indication_p2s_address","replaceAll","generate_heir_indication_p2s_address","WALLET_DEFAULT_STATE","connected","balance","nanoErgs","tokens","get_token_info","id","response","token_info","decimals","name","description","get_box_to_spend","utxo","value","toString","assets","confirmed","forEach","token","tokenId","amount","get_box_balance","skip_token","box_balance","i","length","parseInt","nftId","is_nft","get_box_containing_nft","box_with_nft","boxId","utxos","accumulator","j","find","tkn","tmp_tkn","nft","status","emissionAmount","address_to_inheritance_phase","p1_addr","p2_addr","p3_addr","items","response2","spentTransactionId","nftbox_info","phase","get_role_inheritance_boxes","role_indication_address","total","transactionId","inputs","nft_id","nft_box","push","get_owner_inheritance_boxes","owner_indication_address","get_heir_inheritance_boxes","heir_indication_address","owner_of","heir_of","loaded","CurrentInheritancesOverviewTable","props","owner","className","map","box","to","CURRENT_INHERITANCES_DEFAULT_STATE","CurrentInheritancesOverview","state","React","useContext","AppContext","inheritances","initialState","wallet","reducer","action","type","payload","createContext","dispatch","AppProvider","children","useReducer","Provider","AssetsSelected","ergs","toFixed","NautilusLogo","require","default","WalletModal","onClick","closeHandler","setWalletModalOpened","ergoConnector","nautilus","connect","createErgoObject","then","getContext","context","get_change_address","get_utxos","get_total_balance_including_tokens","res","console","log","src","alt","PageLayout","useState","walletModalOpened","connectWalletHandler","title","INERGITANCE_SERVICE_FEE_AMOUNT","INERGITANCE_SERVICE_FEE_ADDRESS","ergolib","convert_tx_values_number_to_string","tx","outputs","output","asset","convert_utxo_values_number_to_string","validate_address","wasm","Address","from_testnet_str","get_block_height","height","ctx","get_box_selection","wasm_tokens","Tokens","add","Token","TokenId","from_str","TokenAmount","from_i64","I64","selector","SimpleBoxSelector","select","ErgoBoxes","from_boxes_json","BoxValue","get_output_box_candidates_phase1","heir","weeks","phase1_address","min_erg_value","service_fee_value","inheritance_erg_value","output_box_candidates","ErgoBoxCandidates","empty","first_output_builder","ErgoBoxCandidateBuilder","Contract","pay_to_address","from_base58","second_output_builder","third_output_builder","fourth_output_builder","add_token","build","get_output_box_candidates_owner_withdrawal","input_box_selection","first_input_box_id","boxes","get","box_id","to_str","miner_fee_value","min_change_value","tx_builder","TxBuilder","new","data_inputs","DataInputs","set_data_inputs","to_json","converted","parse","full_box","extension","create_transaction_owner_withdrawal","box_to_spend","sign_tx","unsigned_tx","submit_tx","signed_tx","AboutPage","setOwner","setHeir","test_it","HomePage","HowItWorksPage","MyInheritancePage","currentInheritances","setCurrentInheritances","get_users_inheritances","TokensSelect","selectedTokenIndex","setSelectedTokenIndex","tokenIDSelectElement","useRef","tokenAmountInputElement","onChange","current","ref","index","min","step","max","placeholder","e","preventDefault","setToken","parseFloat","FeesOverview","fees","blockchain","service","Summary","colSpan","properties","addresses","holiday_protector","ASSETS_SELECTED_DEFAULT_STATE","FEES_DEFAULT_STATE","ADDRESSES_DEFAULT_STATE","TX_SENT_DEFAULT_STATE","sent","txId","settings","valid_hex_value","str","n","ch","alert","MAX_UNIQUE_TOKENS_IN_BOX","CreateInheritanceForm","assetsSelected","setAssetsSelected","setAddresses","setWeeks","txSent","setTxSent","ergsAmountInputElement","ownerAddressInputElement","heirAddressInputElement","holidayProtectorHashInputElement","weeksInputElement","addressesChangedHandler","previous","href","target","rel","nanoErgsValue","maxNanoErgs","token_id","filter","isNaN","validate_form","tkns","create_transaction_phase1","u_tx","s_tx","CreateInheritancePage","bx","sent_tx","InheritanceOwnerPage","inheritanceBalance","setInheritanceBalance","withdrawalAddressInputElement","useSearchParams","inheritance_id","useEffect","get_nft_box_balance","construct_and_sign_withdrawal_transaction","InheritanceHeirPage","App","path","element","HowItWorks","CreateInheritance","InheritanceHeir","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.6efed859.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/nautilus-logo-icon.6072d19c.svg\";","export const USE_MAINNET = false;\n\nexport const NANO_ERGS_IN_ONE_ERG: number = 1000000000;\n\nexport const MIN_NANO_ERGS_IN_BOX: number = 1000000;\n\nexport const MAX_UNIQUE_TOKENS_IN_BOX: number = 4;\n\nexport const TRANSACTION_PHASE1_BLOCKCHAIN_FEE: number = 10000000;\nexport const TRANSACTION_OWNER_WITHDRAWAL_BLOCKCHAIN_FEE: number = 2000000;\n\nexport const MAINNET_EXPLORER_URL: string = \"https://api.ergoplatform.com\";\nexport const TESTNET_EXPLORER_URL: string = \"https://api-testnet.ergoplatform.com\";\nexport const EXPLORER_URL = USE_MAINNET ? MAINNET_EXPLORER_URL : TESTNET_EXPLORER_URL;\n\nexport const MAINNET_NODE_URL: string = \"https://ergonode.blocpow.io\";\nexport const TESTNET_NODE_URL: string = \"http://213.239.193.208:9052\";\nexport const NODE_URL = USE_MAINNET ? MAINNET_NODE_URL : TESTNET_NODE_URL;\n\nexport const EXPLORER_BALANCE_ENDPOINT_PREFIX: string = \"/api/v1/addresses/\";\nexport const EXPLORER_BALANCE_ENDPOINT_SUFIX: string = \"/balance/total\";\n\nexport const EXPLORER_TOKEN_INFO_PREFIX: string = \"/api/v1/tokens/\";\nexport const EXPLORER_TOKEN_INFO_SUFIX: string = \"\";\n\nexport const EXPLORER_BLOKCHAIN_HEIGHT_PREFIX: string = \"/api/v1/blocks?limit=1\";\nexport const EXPLORER_BLOKCHAIN_HEIGHT_SUFIX: string = \"\";\n\nexport const EXPLORER_ASSET_SEARCH_PREFIX: string = \"/api/v1/assets/search/byTokenId?query=\";\nexport const EXPLORER_ASSET_SEARCH_SUFIX: string = \"\";\n\nexport const EXPLORER_BOX_INFO_PREFIX: string = \"/api/v1/boxes/\";\nexport const EXPLORER_BOX_INFO_SUFIX: string = \"\";\n\nexport const EXPLORER_BOXES_BY_ADDRESS_PREFIX: string = \"/api/v1/boxes/byAddress/\";\nexport const EXPLORER_BOXES_BY_ADDRESS_SUFIX: string = \"\";\n\nexport const EXPLORER_TRANSACTION_INFO_PREFIX: string = \"/api/v1/transactions/\";\nexport const EXPLORER_TRANSACTION_INFO_SUFIX: string = \"\";\n\nexport const NODE_COMPILE_P2S_ENDPOINT_PREFIX: string = \"/script/p2sAddress\";\nexport const NODE_COMPILE_P2S_ENDPOINT_SUFIX: string = \"\";\n","export async function get_request(url: string) {\n\tconst request = await fetch(url);\n\tconst result = await request.json();\n\treturn result;\n}\n\nexport async function post_request(url: string, body: string) {\n\n\tconst request = await fetch(url, {\n\t\tmethod: 'POST',\n\t\tbody,\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t}\n\t});\n\n\tconst result = await request.json();\n\n\treturn result;\n}\n","import { NODE_URL, NODE_COMPILE_P2S_ENDPOINT_PREFIX } from \"./blockchainParameters\";\nimport { post_request } from \"./restApi\";\n\nexport async function compile_ergoscript_to_p2s(script: string): Promise<string> {\n\n\tconst data = JSON.stringify({ source: script });\n\n\tconst result = await post_request(NODE_URL + NODE_COMPILE_P2S_ENDPOINT_PREFIX, data);\n\n\treturn result.address;\n}\n","// export const phase1_ergoscript: string = `{sigmaProp(PK(\"3WwXjy6WHJM4DXRvkn4gZcWuC5wLYimikxKeuKnkEEsCBx3JSegy\"))}`;\nexport const phase1_ergoscript: string = `{PK(\"3WwXjy6WHJM4DXRvkn4gZcWuC5wLYimikxKeuKnkEEsCBx3JSegy\") && (HEIGHT > 10)}`;\n","export const phase2_ergoscript: string = \"{true}\";\n","export const phase3_ergoscript: string = \"{true}\";\n","export const ownerIndication_ergoscript: string = `\n\t{\n\t\tval purpose = \"todo2inheritance\"\n\t\tval role = \"owner\"\n\t\tval uniqueBoolHack = purpose == role || true\n\t\tsigmaProp(uniqueBoolHack && PK(\"owner_address\"))\n\t}\n`;\n","export const heirIndication_ergoscript: string = `\n\t{\n\t\tval purpose = \"todo2inheritance\"\n\t\tval role = \"heir\"\n\t\tval uniqueBoolHack = purpose == role || true\n\t\tsigmaProp(uniqueBoolHack && PK(\"heir_address\"))\n\t}\n`;\n","import { compile_ergoscript_to_p2s } from \"../scripts/smartcontractCompiler\";\n\nimport { phase1_ergoscript } from \"./phase1\";\nimport { phase2_ergoscript } from \"./phase2\";\nimport { phase3_ergoscript } from \"./phase3\";\nimport { ownerIndication_ergoscript } from \"./ownerIndication\";\nimport { heirIndication_ergoscript } from \"./heirIndication\";\n\nexport async function generate_phase1_p2s_address(): Promise<string> {\n\treturn compile_ergoscript_to_p2s(phase1_ergoscript);\n}\n\nexport async function generate_phase2_p2s_address(): Promise<string> {\n\treturn compile_ergoscript_to_p2s(phase2_ergoscript);\n}\n\nexport async function generate_phase3_p2s_address(): Promise<string> {\n\treturn compile_ergoscript_to_p2s(phase3_ergoscript);\n}\n\nexport async function generate_owners_indication_p2s_address(address: string): Promise<string> {\n\treturn compile_ergoscript_to_p2s(ownerIndication_ergoscript.replaceAll(\"owner_address\", address));\n}\n\nexport async function generate_heir_indication_p2s_address(address: string): Promise<string> {\n\treturn compile_ergoscript_to_p2s(heirIndication_ergoscript.replaceAll(\"heir_address\", address));\n}\n","import {\n    EXPLORER_URL, EXPLORER_BALANCE_ENDPOINT_PREFIX, EXPLORER_BALANCE_ENDPOINT_SUFIX,\n    EXPLORER_TOKEN_INFO_PREFIX, EXPLORER_ASSET_SEARCH_PREFIX, EXPLORER_BOX_INFO_PREFIX,\n    EXPLORER_BOXES_BY_ADDRESS_PREFIX, EXPLORER_TRANSACTION_INFO_PREFIX\n} from \"./blockchainParameters\";\n\nimport {\n    generate_owners_indication_p2s_address, generate_heir_indication_p2s_address,\n    generate_phase1_p2s_address, generate_phase2_p2s_address, generate_phase3_p2s_address\n} from \"../smartcontracts/smartcontractsGenerator\";\n\nimport { ICurrentInheritances } from \"../components/CurrentInheritancesOverview\";\n\nimport { get_request } from \"./restApi\";\n\nexport interface IToken {\n    id: string,\n    amount: number,\n    decimals: number,\n    name: string,\n    description: string\n}\n\nexport interface IBalanceWithTokens {\n    nanoErgs: number,\n    tokens: IToken[]\n}\n\nexport interface IWalletProperties {\n    connected: boolean;\n    address: string;\n    balance: IBalanceWithTokens;\n}\n\nexport const WALLET_DEFAULT_STATE: IWalletProperties = {\n    connected: false,\n    address: \"\",\n    balance: {\n        nanoErgs: 0,\n        tokens: []\n    }\n};\n\nexport interface IUTXOToken {\n    tokenId: string,\n    amount: string\n}\n\nexport interface IUTXO {\n    boxId: string,\n    transactionId: string,\n    index: number,\n    ergoTree: string,\n    creationHeight: number,\n    value: string,\n    assets: IUTXOToken[],\n    additionalRegisters: any,\n    confirmed: boolean\n};\n\nexport interface INFTBox {\n    nftId: string,\n    boxId: string,\n    address: string,\n    phase: number\n}\n\nexport async function get_address_balance(address: string): Promise<number> {\n\n    const response = await get_request(EXPLORER_URL +\n        EXPLORER_BALANCE_ENDPOINT_PREFIX +\n        address +\n        EXPLORER_BALANCE_ENDPOINT_SUFIX\n    );\n\n    return response.confirmed.nanoErgs;\n\n}\n\nexport interface ITokenInfo {\n    decimals: number,\n    name: string,\n    description: string\n}\n\nexport async function get_token_info(id: string): Promise<ITokenInfo> {\n\n    const response = await get_request(EXPLORER_URL + EXPLORER_TOKEN_INFO_PREFIX + id);\n\n    const token_info: ITokenInfo = {\n        decimals: response.decimals,\n        name: response.name,\n        description: response.description\n    };\n\n    return token_info;\n}\n\ninterface IExplorerUTXOToken{\n    tokenId: string,\n    index: number,\n    amount: number,\n    name: string | null,\n    decimals: number | null,\n    type: string | null\n}\n\ninterface IExplorerUTXO{\n    boxId: string,\n    transactionId: string,\n    blockId: string,\n    value: number,\n    index: number,\n    globalIndex: number,\n    creationHeight: number,\n    settlementHeight: number,\n    ergoTree: string,\n    address: string,\n    assets: IExplorerUTXOToken[],\n    additionalRegisters: any,\n    spentTransactionId: string | null,\n    mainChain: boolean\n}\n\nexport async function get_box_to_spend(id: string): Promise<IUTXO>{\n\n    const response:IExplorerUTXO = await get_request(EXPLORER_URL + EXPLORER_BOX_INFO_PREFIX + id);\n\n    let utxo: IUTXO = {\n        ...response, value: response.value.toString(), assets: [], confirmed: true\n    };\n\n    response.assets.forEach((token: IExplorerUTXOToken) => {\n        utxo = {...utxo, assets: [...utxo.assets, {\n            tokenId: token.tokenId,\n            // index: token.index,\n            amount: token.amount.toString(),\n            // name: token.name,\n            // decimals: token.decimals,\n            // type: token.type\n        }]}\n    });\n\n    return utxo;\n}\n\nexport async function get_box_balance(id: string, skip_token: string): Promise<IBalanceWithTokens> {\n\n    const response = await get_request(EXPLORER_URL + EXPLORER_BOX_INFO_PREFIX + id);\n\n    const box_balance: IBalanceWithTokens = {\n        nanoErgs: response.value,\n        tokens: []\n    }\n\n    for(var i=0; i < response.assets.length; ++i){\n        const token = response.assets[i];\n        if(token.tokenId === skip_token) continue;\n        const token_info = await get_token_info(token.tokenId);\n        box_balance.tokens = [...box_balance.tokens, \n            {\n                id: token.tokenId,\n                amount: parseInt(token.amount),\n                decimals: token_info.decimals,\n                name: token_info.name,\n                description: token_info.description\n            }\n        ];\n    }\n\n    return box_balance;\n}\n\nexport async function get_nft_box_balance(nftId: string): Promise<IBalanceWithTokens>{\n    \n    const box_balance: IBalanceWithTokens = {\n        nanoErgs: 0,\n        tokens: []\n    }\n\n    if(!(await is_nft(nftId))) return box_balance;\n\n    const box_with_nft = await get_box_containing_nft(nftId);\n    if(box_with_nft === null) return box_balance;\n\n    return get_box_balance(box_with_nft.boxId, nftId);\n}\n\n\nexport async function get_total_balance_including_tokens(utxos: IUTXO[]): Promise<IBalanceWithTokens> {\n    const accumulator: IBalanceWithTokens = { nanoErgs: 0, tokens: [] };\n    for (var i = 0; i < utxos.length; ++i) {\n        const utxo = utxos[i];\n        accumulator.nanoErgs += parseInt(utxo.value);\n        for (var j = 0; j < utxo.assets.length; ++j) {\n            const token = utxo.assets[j];\n            if (!accumulator.tokens.find(tkn => (tkn.id === token.tokenId))) {\n                const token_info = await get_token_info(token.tokenId);\n                accumulator.tokens = [...accumulator.tokens,\n                {\n                    id: token.tokenId,\n                    amount: parseInt(token.amount),\n                    decimals: token_info.decimals,\n                    name: token_info.name,\n                    description: token_info.description\n                }\n                ];\n            } else {\n                const tmp_tkn: IToken | undefined = accumulator.tokens.find(tkn => (tkn.id === token.tokenId));\n                if (tmp_tkn) {\n                    tmp_tkn.amount += parseInt(token.amount);\n                }\n            }\n        }\n    }\n    return accumulator;\n}\n\nexport async function is_nft(nft: string): Promise<boolean> {\n    const response = await get_request(EXPLORER_URL + EXPLORER_TOKEN_INFO_PREFIX + nft);\n    if (response.status === 404 || response.emissionAmount !== 1) return false;\n    return true;\n}\n\nasync function address_to_inheritance_phase(address: string): Promise<number> {\n    const p1_addr: string = await generate_phase1_p2s_address();\n    const p2_addr: string = await generate_phase2_p2s_address();\n    const p3_addr: string = await generate_phase3_p2s_address();\n    if (address === p1_addr) return 1;\n    if (address === p2_addr) return 2;\n    if (address === p3_addr) return 3;\n    return 0;\n}\n\nexport async function get_box_containing_nft(nft: string): Promise<INFTBox | null> {\n\n    const test_for_nft = await is_nft(nft);\n    if (!test_for_nft) return null;\n\n    const response = await get_request(EXPLORER_URL + EXPLORER_ASSET_SEARCH_PREFIX + nft);\n    if (response.items.length === 0) return null;\n\n    //get boxId of latest box which contained this NFT\n    const boxId = response.items[response.items.length - 1].boxId;\n\n    const response2 = await get_request(EXPLORER_URL + EXPLORER_BOX_INFO_PREFIX + boxId);\n    if (response2.spentTransactionId != null) return null;\n\n    const nftbox_info: INFTBox = {\n        nftId: nft,\n        boxId: boxId,\n        address: response2.address,\n        phase: (await address_to_inheritance_phase(response2.address))\n    }\n\n    return nftbox_info;\n}\n\nasync function get_role_inheritance_boxes(role_indication_address: string): Promise<INFTBox[]> {\n\n    const result: INFTBox[] = [];\n\n    const response = await get_request(\n        EXPLORER_URL + EXPLORER_BOXES_BY_ADDRESS_PREFIX + role_indication_address\n    );\n\n    if (response.total === 0) return result;\n\n    for (var i = 0; i < (response.total); ++i) {\n\n        const response2 = await get_request(\n            EXPLORER_URL + EXPLORER_TRANSACTION_INFO_PREFIX + response.items[i].transactionId\n        );\n\n        const nft_id = await response2.inputs[0].boxId;\n        if (!(await is_nft(nft_id))) continue;\n\n        const nft_box = await get_box_containing_nft(nft_id);\n        if (nft_box === null || nft_box.phase === 0) continue;\n\n        result.push(nft_box);\n\n    }\n\n    return result;\n}\n\nexport async function get_owner_inheritance_boxes(address: string): Promise<INFTBox[]> {\n    const owner_indication_address = await generate_owners_indication_p2s_address(address);\n    return get_role_inheritance_boxes(owner_indication_address);\n}\n\nexport async function get_heir_inheritance_boxes(address: string): Promise<INFTBox[]> {\n    const heir_indication_address = await generate_heir_indication_p2s_address(address);\n    return get_role_inheritance_boxes(heir_indication_address);\n}\n\nexport async function get_users_inheritances(address: string): Promise<ICurrentInheritances> {\n    const owner_of = await get_owner_inheritance_boxes(address);\n    const heir_of = await get_heir_inheritance_boxes(address);\n    return {\n        loaded: true,\n        owner_of: owner_of,\n        heir_of: heir_of\n    };\n}\n","import React from \"react\";\n\nimport {Link} from \"react-router-dom\";\n\nimport { INFTBox } from \"../scripts/walletConnector\";\n\nimport \"../css/CurrentInheritancesOverviewTable.css\";\n\nfunction get_state_name_from_phase(phase: number): string {\n\tif (phase === 1) return \"Exist\";\n\tif (phase === 2) return \"Pending withdrawal by heir\";\n\tif (phase === 3) return \"Heir's Withdrawal returned by holiday protector\";\n\treturn \"Unknown\";\n}\n\nfunction CurrentInheritancesOverviewTable(props: { owner: boolean, value: INFTBox[] }) {\n\n\tif (props.value.length === 0) {\n\t\treturn (<div>\n\t\t\tSorry you are not {props.owner ? \"owner\" : \"heir\"} of any inheritances!\n\t\t</div>);\n\t}\n\n\treturn (\n\t\t<table className=\"inheritances-overview-table\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Inheritance ID</th>\n\t\t\t\t\t<th>Inheritance state</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{\n\t\t\t\t\tprops.value.map((box: INFTBox) =>\n\t\t\t\t\t\t<tr key={box.nftId}>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<Link to={\n\t\t\t\t\t\t\t\t\t\"/inheritances/\" + \n\t\t\t\t\t\t\t\t\t(props.owner ? \"owner\" : \"heir\") +\n\t\t\t\t\t\t\t\t\t\"?id=\" +\n\t\t\t\t\t\t\t\t\tbox.nftId\n\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t{box.nftId}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>{get_state_name_from_phase(box.phase)}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n}\n\nexport default CurrentInheritancesOverviewTable;\n","import React from \"react\";\n\nimport { INFTBox } from \"../scripts/walletConnector\";\n\nimport { AppContext } from \"../redux/AppContext\";\n\nimport CurrentInheritancesOverviewTable from \"./CurrentInheritancesOverviewTable\";\n\nexport interface ICurrentInheritances {\n\tloaded: boolean,\n\towner_of: INFTBox[],\n\their_of: INFTBox[]\n};\n\nexport const CURRENT_INHERITANCES_DEFAULT_STATE: ICurrentInheritances = {\n\tloaded: false,\n\towner_of: [],\n\their_of: []\n};\n\nfunction CurrentInheritancesOverview() {\n\n\tconst { state } = React.useContext(AppContext);\n\n\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\tstate.inheritances.loaded ?\n\t\t\t\t\t(state.inheritances.owner_of.length === 0 && state.inheritances.heir_of.length === 0) ?\n\t\t\t\t\t\t<div>Sorry, you are not owner nor heir of any inheritances :-)</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2>Owner of:</h2>\n\t\t\t\t\t\t\t<CurrentInheritancesOverviewTable owner={true} value={state.inheritances.owner_of}/>\n\t\t\t\t\t\t\t<h2>Heir of:</h2>\n\t\t\t\t\t\t\t<CurrentInheritancesOverviewTable owner={false} value={state.inheritances.heir_of}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t: []\n\t\t\t}\n\t\t</div>\n\t);\n}\n\nexport default CurrentInheritancesOverview;\n","import { IWalletProperties, WALLET_DEFAULT_STATE } from \"../scripts/walletConnector\";\nimport {\n    ICurrentInheritances, CURRENT_INHERITANCES_DEFAULT_STATE\n} from \"../components/CurrentInheritancesOverview\";\n\nexport interface IState {\n    wallet: IWalletProperties;\n    inheritances: ICurrentInheritances;\n}\n\nexport interface IAction {\n    type: string;\n    payload: any;\n}\n\nexport const initialState = {\n    wallet: WALLET_DEFAULT_STATE,\n    inheritances: CURRENT_INHERITANCES_DEFAULT_STATE\n}\n\nexport function reducer(state: IState, action: IAction) {\n\n    switch (action.type) {\n\n        case \"wallet_set_connected\":\n            return { ...state, wallet: { ...state.wallet, connected: action.payload } };\n\n        case \"wallet_set_address\":\n            return { ...state, wallet: { ...state.wallet, address: action.payload } };\n\n        case \"wallet_set_balance\":\n            return { ...state, wallet: { ...state.wallet, balance: action.payload } };\n\n        case \"wallet_reset\":\n            return { ...state, wallet: WALLET_DEFAULT_STATE, inheritances: CURRENT_INHERITANCES_DEFAULT_STATE };\n\n        case \"inheritances_set\":\n            return { ...state, inheritances: action.payload };\n\n        default:\n            return state;\n    }\n\n}\n","import React from \"react\";\nimport { reducer, initialState, IState } from \"./reducer\"\n\nexport const AppContext = React.createContext<{\n\tstate: IState;\n\tdispatch: React.Dispatch<any>;\n}>({\n\tstate: initialState,\n\tdispatch: () => null\n})\n\nexport function AppProvider({ children } : any) {\n\t\n\tconst [state, dispatch] = React.useReducer(reducer, initialState)\n\n\treturn (\n\t\t<AppContext.Provider value={{state, dispatch}}>\n\t\t\t{children}\n\t\t</AppContext.Provider>\n\t)\n}\n","import React from \"react\";\n\nimport { ITokenSelected, IAssetsSelected } from \"../CreateInheritanceForm\";\n\nimport { NANO_ERGS_IN_ONE_ERG } from \"../../scripts/blockchainParameters\";\n\nfunction AssetsSelected(props: { assets: IAssetsSelected }) {\n\n\treturn (\n\t\t<table className=\"assets-selected-table\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Amount</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>ERG</td>\n\t\t\t\t\t<td>{props.assets.ergs / NANO_ERGS_IN_ONE_ERG}</td>\n\t\t\t\t</tr>\n\t\t\t\t{(props.assets.tokens.length === 0) ? [] :\n\t\t\t\t\tprops.assets.tokens.map((token: ITokenSelected) =>\n\t\t\t\t\t\t<tr key={token.id}>\n\t\t\t\t\t\t\t<td>{token.id}</td>\n\t\t\t\t\t\t\t<td>{(token.amount * (10 ** (-token.decimals))).toFixed(token.decimals)}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n}\n\nexport default AssetsSelected;\n","import React, { Fragment } from 'react';\n\nimport { AppContext } from \"../redux/AppContext\";\n\nimport { IUTXO, get_total_balance_including_tokens } from '../scripts/walletConnector';\n\nimport AssetsSelected from \"./create_inheritance_form/AssetsSelected\";\n\nimport '../css/WalletModal.css';\n\nconst NautilusLogo: string = require(\"../icons/nautilus-logo-icon.svg\").default;\n\ndeclare const ergoConnector: {\n\tnautilus: {\n\t\tconnect(settings: { createErgoObject: boolean } | undefined): Promise<boolean>;\n\t\tisConnected(): Promise<boolean>;\n\t\tdisconnect(): Promise<boolean>;\n\t\tgetContext(): Promise<object>;\n\t};\n};\n\nfunction WalletModal(props: any) {\n\n\tconst { state, dispatch } = React.useContext(AppContext);\n\n\tfunction checkIfNautilusAvailable() {\n\t\treturn (typeof ergoConnector !== \"undefined\");\n\t}\n\n\tfunction NautilusConnectHandler() {\n\n\n\t\tergoConnector.nautilus.connect({ createErgoObject: false }).then((result) => {\n\n\t\t\tif (!result) {\n\t\t\t\tconsole.log(\"rejected\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch({ type: \"wallet_set_connected\", payload: true });\n\n\t\t\tergoConnector.nautilus.getContext().then((context: any) => {\n\t\t\t\tcontext.get_change_address().then((address: string) => {\n\t\t\t\t\tdispatch({ type: \"wallet_set_address\", payload: address });\n\t\t\t\t});\n\n\n\t\t\t\tcontext.get_utxos().then((utxos: IUTXO[]) => {\n\n\t\t\t\t\tget_total_balance_including_tokens(utxos).then((res) => {\n\n\t\t\t\t\t\tdispatch({ type: \"wallet_set_balance\", payload: res });\n\t\t\t\t\t\tprops.setWalletModalOpened(false);\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t}\n\n\tfunction disconnectButtonHandler() {\n\t\tdispatch({ type: \"wallet_reset\" });\n\t\tprops.setWalletModalOpened(false);\n\t}\n\n\treturn (\n\t\t<div className=\"wallet-modal\">\n\t\t\t<div className=\"wallet-modal-content\">\n\t\t\t\t<span className=\"wallet-modal-close\" onClick={props.closeHandler}>&times;</span>\n\t\t\t\t{\n\t\t\t\t\t!state.wallet.connected ?\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<h2>Select a wallet</h2>\n\t\t\t\t\t\t\t<p>Currently only Nautilus Wallet is supported.</p>\n\t\t\t\t\t\t\t{checkIfNautilusAvailable() ?\n\t\t\t\t\t\t\t\t<button className=\"wallet-modal-wallet-button\" onClick={NautilusConnectHandler}>\n\t\t\t\t\t\t\t\t\t<p>Nautilus Wallet</p>\n\t\t\t\t\t\t\t\t\t<img src={NautilusLogo} alt=\"\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t: <p>Sorry, It seems that you don't have Nautilus Wallet installed!</p>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<h2>Connected wallet:</h2>\n\t\t\t\t\t\t\t<p>{state.wallet.address}</p>\n\t\t\t\t\t\t\t<p>Assets:</p>\n\t\t\t\t\t\t\t<AssetsSelected\n\t\t\t\t\t\t\t\tassets={{\n\t\t\t\t\t\t\t\t\tergs: state.wallet.balance.nanoErgs,\n\t\t\t\t\t\t\t\t\ttokens: state.wallet.balance.tokens\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button className=\"wallet-modal-disconnect-button\" onClick={disconnectButtonHandler}>\n\t\t\t\t\t\t\t\tDisconnect wallet\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t}\n\n\n\t\t\t</div>\n\t\t</div>\n\t);\n\n}\n\nexport default WalletModal;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { AppContext } from \"../redux/AppContext\";\n\nimport WalletModal from \"../components/WalletModal\";\n\nimport \"../css/Layout.css\";\n\nfunction PageLayout(props: any) {\n\n\tconst [walletModalOpened, setWalletModalOpened] = useState<boolean>(false);\n\t// const { state, dispatch } = React.useContext(AppContext);\n\tconst { state } = React.useContext(AppContext);\n\n\tfunction connectWalletHandler() {\n\t\tif (!walletModalOpened) {\n\t\t\tsetWalletModalOpened(true);\n\t\t} else {\n\t\t\tsetWalletModalOpened(false);\n\t\t}\n\t}\n\n\tfunction showWalletHandler() {\n\t\tif (!walletModalOpened) {\n\t\t\tsetWalletModalOpened(true);\n\t\t} else {\n\t\t\tsetWalletModalOpened(false);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div id=\"layout\">\n\t\t\t<div id=\"header\">\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<img src=\"./inergitance_logo.svg\" alt=\"InERGitance - Decentralized inheritance solution\"\n\t\t\t\t\t\ttitle=\"InERGitance - Decentralized inheritance solution\" className=\"header-project-logo\" />\n\t\t\t\t</Link>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/about\">About</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/how-it-works\">How It Works</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.wallet.connected ?\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Link to=\"/my-inheritance\">My Inheritance</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t: []\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t{\n\t\t\t\t\tstate.wallet.connected ?\n\t\t\t\t\t\t<button className=\"show-wallet-btn\" onClick={showWalletHandler}>{state.wallet.address}</button>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<button className=\"connect-wallet-btn\" onClick={connectWalletHandler}>Connect wallet</button>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t{\n\t\t\t\twalletModalOpened ? <WalletModal closeHandler={connectWalletHandler}\n\t\t\t\t\tsetWalletModalOpened={setWalletModalOpened} /> : []\n\t\t\t}\n\t\t\t<div id=\"main-content\">\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</div>\n\t);\n\n}\n\nexport default PageLayout;\n","import { USE_MAINNET } from \"./blockchainParameters\";\n\nexport const INERGITANCE_SERVICE_FEE_AMOUNT: number = 10000000;\n\nexport const MAINNET_SERVICE_FEE_ADDRESS: string = \"todo\";\nexport const TESTNET_SERVICE_FEE_ADDRESS: string = \"3WwXjy6WHJM4DXRvkn4gZcWuC5wLYimikxKeuKnkEEsCBx3JSegy\";\n\nexport const INERGITANCE_SERVICE_FEE_ADDRESS: string = \n\t(USE_MAINNET) ? MAINNET_SERVICE_FEE_ADDRESS : TESTNET_SERVICE_FEE_ADDRESS;\n","import { get_request } from \"./restApi\";\nimport {\n\tEXPLORER_URL, EXPLORER_BLOKCHAIN_HEIGHT_PREFIX, MIN_NANO_ERGS_IN_BOX, TRANSACTION_PHASE1_BLOCKCHAIN_FEE,\n\tUSE_MAINNET, TRANSACTION_OWNER_WITHDRAWAL_BLOCKCHAIN_FEE\n} from \"./blockchainParameters\";\nimport { INERGITANCE_SERVICE_FEE_ADDRESS, INERGITANCE_SERVICE_FEE_AMOUNT } from \"../scripts/inERGitanceSettings\";\nimport { IUTXOToken, get_box_to_spend } from \"./walletConnector\";\n\nimport {\n\tgenerate_phase1_p2s_address,\n\tgenerate_owners_indication_p2s_address,\n\tgenerate_heir_indication_p2s_address\n} from \"../smartcontracts/smartcontractsGenerator\";\n\nlet ergolib = import(\"ergo-lib-wasm-browser\");\n\ndeclare const ergoConnector: {\n\tnautilus: {\n\t\tconnect(settings: { createErgoObject: boolean } | undefined): Promise<boolean>;\n\t\tisConnected(): Promise<boolean>;\n\t\tdisconnect(): Promise<boolean>;\n\t\tgetContext(): Promise<object>;\n\t};\n};\n\ninterface ITxInput {\n\tboxId: string,\n\textension: any\n}\n\ninterface ITxOutputAsset {\n\ttokenId: string,\n\tamount: number\n}\n\ninterface ITxOutputAssetConverted {\n\ttokenId: string,\n\tamount: string\n}\n\ninterface ITxOutput {\n\tvalue: number,\n\tergoTree: string,\n\tassets: ITxOutputAsset[],\n\tadditionalRegisters: any,\n\tcreationHeight: number\n}\n\ninterface ITxOutputConverted {\n\tvalue: string,\n\tergoTree: string,\n\tassets: ITxOutputAssetConverted[],\n\tadditionalRegisters: any,\n\tcreationHeight: number\n}\n\ninterface ITx {\n\tinputs: ITxInput[],\n\tdataInputs: any[],\n\toutputs: ITxOutput[]\n}\n\ninterface ITxConverted {\n\tinputs: ITxInput[],\n\tdataInputs: any[],\n\toutputs: ITxOutputConverted[]\n}\n\ninterface ISignedTxInput {\n\tboxId: string,\n\tspendingProof: {\n\t\tproofBytes: string,\n\t\textension: any\n\t}\n}\n\ninterface ISignedOutput {\n\tboxId: string,\n\tvalue: number,\n\tergoTree: string,\n\tassets: ITxOutputAsset[],\n\tadditionalRegisters: any,\n\tcreationHeight: number,\n\ttransactionId: string,\n\tindex: number\n}\n\ninterface ISignedTx {\n\tid: string,\n\tinputs: ISignedTxInput[]\n\tdataInputs: any[],\n\toutputs: ISignedOutput[]\n}\n\nexport function convert_tx_values_number_to_string(tx: ITx): ITxConverted {\n\treturn {\n\t\t...tx, outputs: tx.outputs.map(\n\t\t\t(output: ITxOutput) => convert_utxo_values_number_to_string(output))\n\t};\n}\n\nexport function convert_utxo_values_number_to_string(json: ITxOutput): ITxOutputConverted {\n\tif (json.assets == null) {\n\t\tjson.assets = [];\n\t}\n\treturn {\n\t\t...json,\n\t\tvalue: json.value.toString(),\n\n\t\tassets: json.assets.map((asset: ITxOutputAsset) => ({\n\t\t\ttokenId: asset.tokenId,\n\t\t\tamount: asset.amount.toString(),\n\t\t})),\n\t};\n}\n\nexport async function validate_address(address: string): Promise<boolean> {\n\n\tlet wasm = (await ergolib);\n\n\ttry {\n\t\tif (USE_MAINNET) {\n\t\t\twasm.Address.from_mainnet_str(address);\n\t\t} else {\n\t\t\twasm.Address.from_testnet_str(address);\n\t\t}\n\t} catch (_) { return false; }\n\n\treturn true;\n}\n\nasync function get_block_height(): Promise<number> {\n\tconst response = await get_request(EXPLORER_URL + EXPLORER_BLOKCHAIN_HEIGHT_PREFIX);\n\treturn response.items[0].height;\n}\n\nexport interface INautilusUTXOAsset {\n\ttokenId: string,\n\tamount: string\n}\n\nexport interface INautilusUTXO {\n\tboxId: string,\n\ttransactionId: string,\n\tindex: number,\n\tergoTree: string,\n\tcreationHeight: number,\n\tvalue: string,\n\tassets: INautilusUTXOAsset[]\n\tadditionalRegisters: any,\n\tconfirmed: boolean\n}\n\nasync function get_utxos() {\n\tconst ctx: any = await ergoConnector.nautilus.getContext();\n\tconst utxos: INautilusUTXO[] = await ctx.get_utxos();\n\treturn utxos;\n}\n\nasync function get_box_selection(utxos: any[], nanoErgs: number, tokens: IUTXOToken[]) {\n\n\tlet wasm = (await ergolib);\n\n\tlet wasm_tokens = new wasm.Tokens();\n\ttokens.forEach((token: IUTXOToken) => {\n\t\twasm_tokens.add(\n\t\t\tnew wasm.Token(\n\t\t\t\twasm.TokenId.from_str(token.tokenId),\n\t\t\t\twasm.TokenAmount.from_i64(wasm.I64.from_str(token.amount))\n\t\t\t)\n\t\t);\n\t});\n\n\tconst selector = new wasm.SimpleBoxSelector();\n\n\treturn selector.select(\n\t\twasm.ErgoBoxes.from_boxes_json(utxos),\n\t\twasm.BoxValue.from_i64(wasm.I64.from_str(nanoErgs.toString())),\n\t\twasm_tokens\n\t);\n\n}\n\nasync function get_output_box_candidates_phase1(\n\towner: string, heir: string, weeks: number, nanoErgs: number, tokens: IUTXOToken[],\n\tnftId: string, height: number\n) {\n\n\tlet wasm = (await ergolib);\n\n\tconst phase1_address = await generate_phase1_p2s_address();\n\tconst owner_indication_address = await generate_owners_indication_p2s_address(owner);\n\tconst heir_indication_address = await generate_heir_indication_p2s_address(heir);\n\n\tconst min_erg_value = wasm.BoxValue.from_i64(wasm.I64.from_str((MIN_NANO_ERGS_IN_BOX).toString()));\n\tconst service_fee_value = wasm.BoxValue.from_i64(wasm.I64.from_str((INERGITANCE_SERVICE_FEE_AMOUNT).toString()));\n\tconst inheritance_erg_value = wasm.BoxValue.from_i64(wasm.I64.from_str(nanoErgs.toString()));\n\n\tconst output_box_candidates = wasm.ErgoBoxCandidates.empty();\n\n\tconst first_output_builder = new wasm.ErgoBoxCandidateBuilder(\n\t\tinheritance_erg_value,\n\t\twasm.Contract.pay_to_address(wasm.Address.from_base58(phase1_address)),\n\t\theight\n\t);\n\n\tconst second_output_builder = new wasm.ErgoBoxCandidateBuilder(\n\t\tmin_erg_value,\n\t\twasm.Contract.pay_to_address(wasm.Address.from_base58(owner_indication_address)),\n\t\theight\n\t);\n\n\tconst third_output_builder = new wasm.ErgoBoxCandidateBuilder(\n\t\tmin_erg_value,\n\t\twasm.Contract.pay_to_address(wasm.Address.from_base58(heir_indication_address)),\n\t\theight\n\t);\n\n\tconst fourth_output_builder = new wasm.ErgoBoxCandidateBuilder(\n\t\tservice_fee_value,\n\t\twasm.Contract.pay_to_address(wasm.Address.from_base58(INERGITANCE_SERVICE_FEE_ADDRESS)),\n\t\theight\n\t);\n\n\ttokens.forEach((token: IUTXOToken) => {\n\t\tfirst_output_builder.add_token(\n\t\t\twasm.TokenId.from_str(token.tokenId),\n\t\t\twasm.TokenAmount.from_i64(wasm.I64.from_str(token.amount))\n\t\t);\n\t});\n\n\tfirst_output_builder.add_token(\n\t\twasm.TokenId.from_str(nftId),\n\t\twasm.TokenAmount.from_i64(wasm.I64.from_str(\"1\"))\n\t);\n\n\toutput_box_candidates.add(first_output_builder.build());\n\toutput_box_candidates.add(second_output_builder.build());\n\toutput_box_candidates.add(third_output_builder.build());\n\toutput_box_candidates.add(fourth_output_builder.build());\n\n\treturn output_box_candidates;\n}\n\nasync function get_output_box_candidates_owner_withdrawal(\n\towner: string, nanoErgs: number, tokens: IUTXOToken[], nftId: string, height: number\n) {\n\n\tlet wasm = (await ergolib);\n\n\tconst inheritance_erg_value = wasm.BoxValue.from_i64(\n\t\twasm.I64.from_str(\n\t\t\t(nanoErgs - TRANSACTION_OWNER_WITHDRAWAL_BLOCKCHAIN_FEE).toString()\n\t\t)\n\t);\n\n\tconst output_box_candidates = wasm.ErgoBoxCandidates.empty();\n\n\tconst first_output_builder = new wasm.ErgoBoxCandidateBuilder(\n\t\tinheritance_erg_value,\n\t\twasm.Contract.pay_to_address(wasm.Address.from_base58(owner)),\n\t\theight\n\t);\n\n\ttokens.forEach((token: IUTXOToken) => {\n\t\tif(token.tokenId !== nftId)\n\t\tfirst_output_builder.add_token(\n\t\t\twasm.TokenId.from_str(token.tokenId),\n\t\t\twasm.TokenAmount.from_i64(wasm.I64.from_str(token.amount))\n\t\t);\n\t});\n\n\toutput_box_candidates.add(first_output_builder.build());\n\n\treturn output_box_candidates;\n}\n\nexport async function create_transaction_phase1(\n\towner: string, heir: string, weeks: number, nanoErgs: number, tokens: IUTXOToken[]\n): Promise<ITxConverted> {\n\n\tlet wasm = (await ergolib);\n\n\tconst height = await get_block_height();\n\n\tconst utxos = await get_utxos();\n\tconst input_box_selection = await get_box_selection(\n\t\tutxos,\n\t\t(nanoErgs + 2 * MIN_NANO_ERGS_IN_BOX + INERGITANCE_SERVICE_FEE_AMOUNT + TRANSACTION_PHASE1_BLOCKCHAIN_FEE),\n\t\ttokens\n\t);\n\n\tconst first_input_box_id = input_box_selection.boxes().get(0).box_id().to_str();\n\n\tconst output_box_candidates = await get_output_box_candidates_phase1(\n\t\towner, heir, weeks, nanoErgs, tokens, first_input_box_id, height\n\t);\n\n\tconst miner_fee_value = wasm.BoxValue.from_i64(wasm.I64.from_str((TRANSACTION_PHASE1_BLOCKCHAIN_FEE).toString()));\n\tconst min_change_value = wasm.BoxValue.from_i64(wasm.I64.from_str((MIN_NANO_ERGS_IN_BOX).toString()));\n\n\tconst tx_builder = wasm.TxBuilder.new(\n\t\tinput_box_selection,\n\t\toutput_box_candidates,\n\t\theight,\n\t\tminer_fee_value,\n\t\twasm.Address.from_base58(owner),\n\t\tmin_change_value\n\t);\n\n\tconst data_inputs = new wasm.DataInputs();\n\ttx_builder.set_data_inputs(data_inputs);\n\n\tconst tx = tx_builder.build().to_json();\n\tconst converted = convert_tx_values_number_to_string(JSON.parse(tx));\n\n\tconverted.inputs = converted.inputs.map((box: any) => {\n\t\tconst full_box = utxos.find(utxo => utxo.boxId === box.boxId);\n\t\tif (full_box)\n\t\t\treturn { ...full_box, extension: {} };\n\t\telse return box;\n\t});\n\n\treturn converted;\n}\n\nexport async function create_transaction_owner_withdrawal(\n\towner: string, box_to_spend: INautilusUTXO, nftId: string, nanoErgs: number, tokens: IUTXOToken[]\n): Promise<ITxConverted> {\n\n\tlet wasm = (await ergolib);\n\n\tconst height = await get_block_height();\n\n\tconst utxos = [box_to_spend];\n\tconst input_box_selection = await get_box_selection(\n\t\tutxos,\n\t\tnanoErgs,\n\t\ttokens\n\t);\n\n\tconst output_box_candidates = await get_output_box_candidates_owner_withdrawal(\n\t\towner, nanoErgs, tokens, nftId, height\n\t);\n\n\tconst miner_fee_value = wasm.BoxValue.from_i64(\n\t\twasm.I64.from_str((TRANSACTION_OWNER_WITHDRAWAL_BLOCKCHAIN_FEE).toString())\n\t);\n\n\tconst min_change_value = wasm.BoxValue.from_i64(wasm.I64.from_str((MIN_NANO_ERGS_IN_BOX).toString()));\n\n\tconst tx_builder = wasm.TxBuilder.new(\n\t\tinput_box_selection,\n\t\toutput_box_candidates,\n\t\theight,\n\t\tminer_fee_value,\n\t\twasm.Address.from_base58(owner),\n\t\tmin_change_value\n\t);\n\n\tconst data_inputs = new wasm.DataInputs();\n\ttx_builder.set_data_inputs(data_inputs);\n\n\tconst tx = tx_builder.build().to_json();\n\tconst converted = convert_tx_values_number_to_string(JSON.parse(tx));\n\n\tconverted.inputs = converted.inputs.map((box: any) => {\n\t\tconst full_box = utxos.find(utxo => utxo.boxId === box.boxId);\n\t\tif (full_box)\n\t\t\treturn { ...full_box, extension: {} };\n\t\telse return box;\n\t});\n\n\treturn converted;\n}\n\nexport async function sign_tx(unsigned_tx: ITxConverted): Promise<ISignedTx | null> {\n\tconst ctx: any = await ergoConnector.nautilus.getContext();\n\ttry {\n\t\treturn ctx.sign_tx(unsigned_tx);\n\t} catch (_) { return null; }\n}\n\nexport async function submit_tx(signed_tx: ISignedTx): Promise<string | null> {\n\tconst ctx: any = await ergoConnector.nautilus.getContext();\n\ttry {\n\t\treturn ctx.submit_tx(signed_tx);\n\t} catch (_) { return null; }\n}\n\nexport async function test_it() {\n\n}\n\nexport { };\n","import React from \"react\";\n\nimport {\n\tgenerate_owners_indication_p2s_address, generate_heir_indication_p2s_address\n} from \"../smartcontracts/smartcontractsGenerator\";\n\nimport { useState } from \"react\";\nimport { AppContext } from \"../redux/AppContext\";\n\nimport { test_it } from \"../scripts/transactionsBuilder\";\n\nimport \"../css/About.css\";\n\nfunction AboutPage() {\n\n\tconst { state } = React.useContext(AppContext);\n\n\tconst [owner, setOwner] = useState<string>(\"lol\");\n\tconst [heir, setHeir] = useState<string>(\"lol\");\n\n\tif (state.wallet.connected) {\n\n\t\tgenerate_owners_indication_p2s_address(state.wallet.address).then(result => {\n\t\t\tsetOwner(result);\n\t\t});\n\n\t\tgenerate_heir_indication_p2s_address(state.wallet.address).then(result => {\n\t\t\tsetHeir(result);\n\t\t});\n\n\t}\n\n\tfunction buttonClickHandler() {\n\t\ttest_it();\n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"about-page-text\">\n\t\t\t\t<h1>About</h1>\n\t\t\t\t<p>\n\t\t\t\t\tInERGitance is a decentralized inheritance solution developed specifically for Ergo blockchain. Main motivation of the project is to give back freedom and full control over their funds to its' users.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tUnfortunately, in many countries freedom of people (especially financial freedom) is heavily restricted by various forms of abusive laws. One of the main purposes of cryptocurrencies is to bring back freedom to anyone who desires it. Typically, even if some \"better\" goverments don't impose heavy constraints on financial freedom of a living person, they still heavily regulate what will happen with one's property after he dies.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tMore often than not there are no options for deceased to freely express what they wish to happen with their belongings after their death. There can be, for example, restrictions to pass their belongings only to family members, etc., and even if they don't like it, they simply cannot refuse doing so. Therefore, the purpose of this project is to help those affected people to fully regain their financial freedom.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<p>{owner}</p>\n\t\t\t<p>{heir}</p>\n\t\t\t<button onClick={buttonClickHandler}>Sign TX</button>\n\t\t</div>\n\t);\n\n}\n\nexport default AboutPage;\n","import React from \"react\";\n\nimport { Link } from \"react-router-dom\";\n\nimport \"../css/Home.css\";\n\nfunction HomePage() {\n\n\treturn (\n\t\t<div className=\"home-page-div\">\n\t\t\t<img src=\"./inergitance_logo.svg\" alt=\"InERGitance - Decentralized inheritance solution\"\n\t\t\t\ttitle=\"InERGitance - Decentralized inheritance solution\" />\n\t\t\t<h1>Decentralized inheritance solution on Ergo blockchain</h1>\n\t\t\t<Link to=\"/how-it-works\">\n\t\t\t\t<button>See how it works!</button>\n\t\t\t</Link>\n\t\t</div>\n\t);\n\n}\n\n\nexport default HomePage;\n","import React from \"react\";\n\nfunction HowItWorksPage() {\n\n\treturn (\n\t\t<div>HowItWorks page...</div>\n\t);\n\n}\n\nexport default HowItWorksPage;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { ICurrentInheritances, CURRENT_INHERITANCES_DEFAULT_STATE } from \"../components/CurrentInheritancesOverview\";\nimport { get_users_inheritances } from \"../scripts/walletConnector\";\n\nimport { Navigate } from \"react-router-dom\";\n\nimport CurrentInheritancesOverview from \"../components/CurrentInheritancesOverview\";\n\nimport { AppContext } from \"../redux/AppContext\";\n\nimport \"../css/MyInheritance.css\";\n\nfunction MyInheritancePage() {\n\n\tconst { state, dispatch } = React.useContext(AppContext);\n\tconst [currentInheritances, setCurrentInheritances] = useState<ICurrentInheritances>(CURRENT_INHERITANCES_DEFAULT_STATE);\n\n\tif (!state.wallet.connected) {\n\t\treturn <Navigate to=\"/\" />\n\t}\n\n\t//always reload inheritances instead of relaying on the old loaded ones in the redux AppContext state\n\tif (!currentInheritances.loaded) {\n\t\tget_users_inheritances(state.wallet.address).then((result: ICurrentInheritances) => {\n\t\t\tdispatch({type: \"inheritances_set\", payload: result});\n\t\t\tsetCurrentInheritances(result);\n\t\t});\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t\t\t{\n\t\t\t\t\tcurrentInheritances.loaded ?\n\t\t\t\t\t\t<CurrentInheritancesOverview /> :\n\t\t\t\t\t\t<h2>Loading your's inheritances....</h2>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<Link to=\"/create-inheritance\">\n\t\t\t\t<button className=\"create-inheritance-button\">Create inheritance</button>\n\t\t\t</Link>\n\t\t</div>\n\t);\n\n}\n\nexport default MyInheritancePage;\n","import React, { useState, useRef } from \"react\";\n\nimport { IToken } from \"../../scripts/walletConnector\";\n\nimport \"../../css/CreateInheritanceForm.css\";\n\nfunction TokensSelect(props: { tokens: IToken[], setToken: (token_id: string, decimals: number, amount: number) => void }) {\n\n\tconst [selectedTokenIndex, setSelectedTokenIndex] = useState<number>(0);\n\n\tconst tokenIDSelectElement = useRef<HTMLSelectElement>(null);\n\tconst tokenAmountInputElement = useRef<HTMLInputElement>(null);\n\n\tif (props.tokens.length === 0) {\n\t\treturn (<p>You don't have any tokens</p>);\n\t}\n\n\tfunction selectChangeHandler() {\n\t\tif (tokenIDSelectElement.current) {\n\t\t\tsetSelectedTokenIndex(parseInt(tokenIDSelectElement.current.value));\n\t\t}\n\t}\n\n\tfunction addTokenHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tif (tokenIDSelectElement.current && tokenAmountInputElement.current) {\n\t\t\tprops.setToken(\n\t\t\t\tprops.tokens[parseInt(tokenIDSelectElement.current.value)].id,\n\t\t\t\tprops.tokens[parseInt(tokenIDSelectElement.current.value)].decimals,\n\t\t\t\t(parseFloat(tokenAmountInputElement.current.value) * (10 ** (props.tokens[selectedTokenIndex].decimals)))\n\t\t\t);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<select name=\"token-select\" onChange={selectChangeHandler} ref={tokenIDSelectElement}>\n\t\t\t\t{props.tokens.map((token: IToken, index: number) => <option value={index} key={token.id}>{token.id}</option>)}\n\t\t\t</select>\n\t\t\t<p><b>Name:</b> {props.tokens[selectedTokenIndex].name}</p>\n\t\t\t<p><b>Description:</b> {props.tokens[selectedTokenIndex].description}</p>\n\t\t\t<p><b>Decimals:</b> {props.tokens[selectedTokenIndex].decimals}</p>\n\t\t\t<p><b>Available:</b> \n\t\t\t\t{props.tokens[selectedTokenIndex].amount * (10 ** (-props.tokens[selectedTokenIndex].decimals))}\n\t\t\t</p>\n\t\t\t<input type=\"number\" name=\"token-amount\" min=\"0\"\n\t\t\t\tstep={10 ** (-props.tokens[selectedTokenIndex].decimals)}\n\t\t\t\tmax={props.tokens[selectedTokenIndex].amount * (10 ** (-props.tokens[selectedTokenIndex].decimals))}\n\t\t\t\tplaceholder=\"token amount\" ref={tokenAmountInputElement}\n\t\t\t/>\n\t\t\t<button onClick={addTokenHandler} className=\"create-inheritance-form-button\">\n\t\t\t\tAdd selected token\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nexport default TokensSelect;\n","import React from \"react\";\n\nimport { IFees } from \"../CreateInheritanceForm\";\n\nimport { NANO_ERGS_IN_ONE_ERG } from \"../../scripts/blockchainParameters\";\n\nfunction FeesOverview(props: { fees: IFees }) {\n\n\treturn (\n\t\t<table className=\"fees-overview-table\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Type</th>\n\t\t\t\t\t<th>Amount</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Ergo blockchain fee</td>\n\t\t\t\t\t<td>{props.fees.blockchain / NANO_ERGS_IN_ONE_ERG} ERG</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Service fee</td>\n\t\t\t\t\t<td>{props.fees.service / NANO_ERGS_IN_ONE_ERG} ERG</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><b>Total</b></td>\n\t\t\t\t\t<td><b>{(props.fees.blockchain + props.fees.service) / NANO_ERGS_IN_ONE_ERG} ERG</b></td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t);\n\n}\n\nexport default FeesOverview;\n","import React from \"react\";\n\n// import { ITokenSelected, IAssetsSelected, ICreateInheritanceProperties } from \"../CreateInheritanceForm\";\nimport { ITokenSelected, ICreateInheritanceProperties } from \"../CreateInheritanceForm\";\n\nimport { NANO_ERGS_IN_ONE_ERG } from \"../../scripts/blockchainParameters\";\n\nfunction Summary(props: { properties: ICreateInheritanceProperties }) {\n\treturn (\n\t\t<table className=\"create-inheritance-summary-table\">\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan={2}>Assets</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Amount</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>ERG</td>\n\t\t\t\t\t<td>{props.properties.assets.ergs / NANO_ERGS_IN_ONE_ERG}</td>\n\t\t\t\t</tr>\n\t\t\t\t{(props.properties.assets.tokens.length === 0) ? [] :\n\t\t\t\t\tprops.properties.assets.tokens.map((token: ITokenSelected) =>\n\t\t\t\t\t\t<tr key={token.id}>\n\t\t\t\t\t\t\t<td>{token.id}</td>\n\t\t\t\t\t\t\t<td>{(token.amount * (10 ** (-token.decimals))).toFixed(token.decimals)}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan={2}>Addresses</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Role</th>\n\t\t\t\t\t<th>Address</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Owner</td>\n\t\t\t\t\t<td>{props.properties.addresses.owner}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Heir</td>\n\t\t\t\t\t<td>{props.properties.addresses.heir}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Role</th>\n\t\t\t\t\t<th>Hash</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Holiday protector</td>\n\t\t\t\t\t<td>{props.properties.addresses.holiday_protector}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan={2}>Heir's withdrawal period</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colSpan={2}>{props.properties.weeks} {(props.properties.weeks > 1) ? \"weeks\" : \"week\"}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t);\n}\n\nexport default Summary;\n","import React, { useState, useRef } from \"react\";\n\nimport { AppContext } from \"../redux/AppContext\";\n\nimport {\n\tMIN_NANO_ERGS_IN_BOX, NANO_ERGS_IN_ONE_ERG, TRANSACTION_PHASE1_BLOCKCHAIN_FEE,\n\tMAX_UNIQUE_TOKENS_IN_BOX\n} from \"../scripts/blockchainParameters\";\n\nimport { INERGITANCE_SERVICE_FEE_AMOUNT } from \"../scripts/inERGitanceSettings\";\n\nimport { IWalletProperties, IUTXOToken } from \"../scripts/walletConnector\";\n\nimport {\n\tvalidate_address, create_transaction_phase1, sign_tx, submit_tx\n} from \"../scripts/transactionsBuilder\";\n\nimport AssetsSelected from \"./create_inheritance_form/AssetsSelected\";\nimport TokensSelect from \"./create_inheritance_form/TokensSelect\";\nimport FeesOverview from \"./create_inheritance_form/FeesOverview\";\nimport Summary from \"./create_inheritance_form/Summary\";\n\nimport \"../css/CreateInheritanceForm.css\";\n\nexport interface ITokenSelected {\n\tid: string,\n\tamount: number,\n\tdecimals: number\n}\n\nexport interface IAssetsSelected {\n\tergs: number;\n\ttokens: ITokenSelected[]\n};\n\nexport interface IFees {\n\tblockchain: number,\n\tservice: number\n};\n\nexport interface IAddresses {\n\towner: string,\n\their: string,\n\tholiday_protector: string,\n}\n\nexport interface ICreateInheritanceProperties {\n\tassets: IAssetsSelected,\n\taddresses: IAddresses,\n\tweeks: number\n};\n\nexport interface ITxSent {\n\tsent: boolean,\n\ttxId: string\n}\n\nconst ASSETS_SELECTED_DEFAULT_STATE: IAssetsSelected = {\n\tergs: 0,\n\ttokens: []\n};\n\nconst FEES_DEFAULT_STATE: IFees = {\n\tblockchain: TRANSACTION_PHASE1_BLOCKCHAIN_FEE + 2 * MIN_NANO_ERGS_IN_BOX,\n\tservice: INERGITANCE_SERVICE_FEE_AMOUNT\n};\n\nconst ADDRESSES_DEFAULT_STATE: IAddresses = {\n\towner: \"\",\n\their: \"\",\n\tholiday_protector: \"\"\n};\n\nexport const TX_SENT_DEFAULT_STATE: ITxSent = {\n\tsent: false,\n\ttxId: \"\"\n}\n\nconst BLAKE2B_256_ZEROS: string = \"0000000000000000000000000000000000000000000000000000000000000000\";\n\nasync function validate_form(\n\tsettings: ICreateInheritanceProperties,\n\tfees: IFees,\n\twallet: IWalletProperties\n): Promise<boolean> {\n\n\tif ((settings.assets.ergs + fees.blockchain + fees.service) > wallet.balance.nanoErgs) {\n\t\talert(\"Wallet don't have enough ERGs!\");\n\t\treturn false;\n\t}\n\n\t// minus one because one token place will be consumed by special newly\n\t// minted NFT used for inheritance identification\n\tif (settings.assets.tokens.length > (MAX_UNIQUE_TOKENS_IN_BOX - 1)) {\n\t\talert(\n\t\t\t\"You can only add maximum \" +\n\t\t\t(MAX_UNIQUE_TOKENS_IN_BOX - 1).toString() +\n\t\t\t\" tokens into your inheritance (blockchain limit)!\"\n\t\t);\n\t\treturn false;\n\t}\n\n\tif (settings.weeks < 1) {\n\t\talert(\"At least one week withdrawal period is required!\");\n\t\treturn false;\n\t}\n\n\tconst owner_valid = await validate_address(settings.addresses.owner);\n\n\tif (!owner_valid) {\n\t\talert(\"Owner address is invalid!\");\n\t\treturn false;\n\t}\n\n\tconst heir_valid = await validate_address(settings.addresses.heir);\n\n\tif (!heir_valid) {\n\t\talert(\"Heir address is invalid!\");\n\t\treturn false;\n\t}\n\n\tconst BLAKE2B_256_BASE16_CHARS_LENGTH: number = 64;\n\n\tfunction valid_hex_value(str: string): boolean {\n\t\tconst n = str.length;\n\t\tfor (let i = 0; i < n; ++i) {\n\t\t\tconst ch = str[i];\n\t\t\tif ((ch < '0' || ch > '9') &&\n\t\t\t\t(ch < 'A' || ch > 'F') &&\n\t\t\t\t(ch < 'a' || ch > 'f')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tif (\n\t\tsettings.addresses.holiday_protector.length !== BLAKE2B_256_BASE16_CHARS_LENGTH ||\n\t\t(!valid_hex_value(settings.addresses.holiday_protector))\n\t) {\n\t\talert(\"Invalid value for holiday protector's hash!\");\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nfunction CreateInheritanceForm() {\n\n\t// const { state, dispatch } = React.useContext(AppContext);\n\tconst { state } = React.useContext(AppContext);\n\n\tconst [assetsSelected, setAssetsSelected] = useState<IAssetsSelected>(ASSETS_SELECTED_DEFAULT_STATE);\n\tconst [addresses, setAddresses] = useState<IAddresses>(ADDRESSES_DEFAULT_STATE);\n\tconst [weeks, setWeeks] = useState<number>(1);\n\n\tconst [txSent, setTxSent] = useState<ITxSent>(TX_SENT_DEFAULT_STATE);\n\n\t// const [fees, setFees] = useState<IFees>(FEES_DEFAULT_STATE);\n\tconst [fees] = useState<IFees>(FEES_DEFAULT_STATE);\n\n\tconst ergsAmountInputElement = useRef<HTMLInputElement>(null);\n\tconst ownerAddressInputElement = useRef<HTMLInputElement>(null);\n\tconst heirAddressInputElement = useRef<HTMLInputElement>(null);\n\tconst holidayProtectorHashInputElement = useRef<HTMLInputElement>(null);\n\n\tconst weeksInputElement = useRef<HTMLInputElement>(null);\n\n\tfunction assets_set_ergs(amount: number) {\n\t\tsetAssetsSelected((previous: IAssetsSelected) => ({ ...previous, ergs: amount }));\n\t}\n\n\tfunction assets_set_token(token_id: string, decimals: number, amount: number) {\n\n\t\tsetAssetsSelected((previous: IAssetsSelected) => {\n\t\t\tif (!previous.tokens.find((token: ITokenSelected) => (token.id === token_id))) {\n\t\t\t\tif (isNaN(amount) || amount <= 0) {\n\t\t\t\t\treturn ({ ...previous });\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t{\n\t\t\t\t\t\t...previous, tokens: [...previous.tokens,\n\t\t\t\t\t\t{ id: token_id, amount: amount, decimals: decimals }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst tmp_tkn: ITokenSelected | undefined =\n\t\t\t\t\tprevious.tokens.find((token: ITokenSelected) => (token.id === token_id));\n\t\t\t\tif (tmp_tkn) tmp_tkn.amount = amount;\n\t\t\t\tif (amount <= 0) {\n\t\t\t\t\treturn ({\n\t\t\t\t\t\t...previous,\n\t\t\t\t\t\ttokens: previous.tokens.filter((token: ITokenSelected) => (token.id !== token_id))\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn ({ ...previous });\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tfunction ergsAmountChangeHandler() {\n\t\tif (ergsAmountInputElement.current) {\n\t\t\tconst nanoErgsValue = parseFloat(ergsAmountInputElement.current.value) * NANO_ERGS_IN_ONE_ERG;\n\t\t\tconst maxNanoErgs = state.wallet.balance.nanoErgs - (fees.service + fees.blockchain);\n\t\t\tif (nanoErgsValue > maxNanoErgs) {\n\t\t\t\tergsAmountInputElement.current.value = (maxNanoErgs / NANO_ERGS_IN_ONE_ERG).toString();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addERGsHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tif (ergsAmountInputElement.current) {\n\t\t\tconst nanoErgsValue = parseFloat(ergsAmountInputElement.current.value) * NANO_ERGS_IN_ONE_ERG;\n\t\t\tconst maxNanoErgs = state.wallet.balance.nanoErgs - (fees.service + fees.blockchain);\n\t\t\tassets_set_ergs(\n\t\t\t\t(nanoErgsValue > MIN_NANO_ERGS_IN_BOX) ?\n\t\t\t\t\t(nanoErgsValue > maxNanoErgs) ? maxNanoErgs : nanoErgsValue\n\t\t\t\t\t: MIN_NANO_ERGS_IN_BOX\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction useCurrentAddressHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tif (ownerAddressInputElement.current) {\n\t\t\townerAddressInputElement.current.value = state.wallet.address;\n\t\t\taddressesChangedHandler();\n\t\t}\n\t}\n\n\tfunction setZerosHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tif (holidayProtectorHashInputElement.current) {\n\t\t\tholidayProtectorHashInputElement.current.value = BLAKE2B_256_ZEROS;\n\t\t\taddressesChangedHandler();\n\t\t}\n\t}\n\n\tfunction addressesChangedHandler() {\n\t\tsetAddresses((previous: IAddresses) => (\n\t\t\t{\n\t\t\t\t...ADDRESSES_DEFAULT_STATE,\n\t\t\t\towner:\n\t\t\t\t\t(ownerAddressInputElement.current ? ownerAddressInputElement.current.value : \"None\"),\n\t\t\t\their:\n\t\t\t\t\t(heirAddressInputElement.current ? heirAddressInputElement.current.value : \"None\"),\n\t\t\t\tholiday_protector:\n\t\t\t\t\t(holidayProtectorHashInputElement.current ? holidayProtectorHashInputElement.current.value : \"None\")\n\t\t\t}\n\t\t));\n\t}\n\n\tfunction weeksChangedHandler() {\n\t\tsetWeeks((previous: number) => (\n\t\t\t(weeksInputElement.current ? parseInt(weeksInputElement.current.value) : 1)\n\t\t));\n\t}\n\n\tfunction createInheritanceButtonHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tvalidate_form(\n\t\t\t{\n\t\t\t\tassets: assetsSelected,\n\t\t\t\taddresses: addresses,\n\t\t\t\tweeks: weeks\n\t\t\t},\n\t\t\tfees,\n\t\t\tstate.wallet\n\t\t).then((result: boolean) => {\n\t\t\tif (result){\n\t\t\t\tconst tkns: IUTXOToken[] = assetsSelected.tokens.map((tkn: ITokenSelected) => (\n\t\t\t\t\t{\n\t\t\t\t\t\ttokenId: tkn.id,\n\t\t\t\t\t\tamount: tkn.amount.toString()\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t\tcreate_transaction_phase1(\n\t\t\t\t\taddresses.owner,\n\t\t\t\t\taddresses.heir,\n\t\t\t\t\tweeks,\n\t\t\t\t\tassetsSelected.ergs,\n\t\t\t\t\ttkns\n\t\t\t\t).then(u_tx => {\n\t\t\t\t\tsign_tx(u_tx).then(s_tx => {\n\t\t\t\t\t\tif(s_tx !== null){\n\t\t\t\t\t\t\tsubmit_tx(s_tx).then(res => {\n\t\t\t\t\t\t\t\tif(res !== null){\n\t\t\t\t\t\t\t\t\tsetTxSent({sent: true, txId: res});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tif (txSent.sent) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h3>Transaction&nbsp;\n\t\t\t\t\t<a href={\"https://testnet.ergoplatform.com/en/transactions/\" + txSent.txId}\n\t\t\t\t\t\ttarget=\"_blank\" rel=\"noopener norefferer\">\n\t\t\t\t\t\t{txSent.txId}\n\t\t\t\t\t</a>\n\t\t\t\t &nbsp;was successfully sent! :-)</h3>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"inheritance-form-main-div\">\n\t\t\t<h2 className=\"inheritance-form-heading\">Create inheritance form:</h2>\n\t\t\t<hr />\n\t\t\t<form action=\"\">\n\t\t\t\t<div className=\"inheritance-form-subsection-div\">\n\t\t\t\t\t<h3 className=\"inheritance-form-heading\">Assets to include:</h3>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<AssetsSelected assets={assetsSelected} />\n\t\t\t\t\t<input type=\"number\" name=\"ergs-amount\" min={MIN_NANO_ERGS_IN_BOX / NANO_ERGS_IN_ONE_ERG}\n\t\t\t\t\t\tmax={state.wallet.balance.nanoErgs / NANO_ERGS_IN_ONE_ERG} step=\"0.01\"\n\t\t\t\t\t\tonChange={ergsAmountChangeHandler}\n\t\t\t\t\t\tplaceholder=\"ERG amount\" ref={ergsAmountInputElement}\n\t\t\t\t\t/>\n\t\t\t\t\t<button onClick={addERGsHandler} className=\"create-inheritance-form-button\">\n\t\t\t\t\t\tAdd ERGs\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3>Add tokens to inheritance:</h3>\n\t\t\t\t\t\t<TokensSelect tokens={state.wallet.balance.tokens} setToken={assets_set_token} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inheritance-form-subsection-div\">\n\t\t\t\t\t<h3 className=\"inheritance-form-heading\">Inheritance settings:</h3>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<input type=\"text\" placeholder=\"Owner's address (yours)\"\n\t\t\t\t\t\tonChange={addressesChangedHandler} ref={ownerAddressInputElement}\n\t\t\t\t\t/>\n\t\t\t\t\t<button onClick={useCurrentAddressHandler} className=\"create-inheritance-form-button\">\n\t\t\t\t\t\tUse current address\n\t\t\t\t\t</button>\n\t\t\t\t\t<input type=\"text\" placeholder=\"Heir's address\"\n\t\t\t\t\t\tonChange={addressesChangedHandler} ref={heirAddressInputElement}\n\t\t\t\t\t/>\n\t\t\t\t\t<input type=\"text\" placeholder=\"Holiday protector address\"\n\t\t\t\t\t\tonChange={addressesChangedHandler} ref={holidayProtectorHashInputElement}\n\t\t\t\t\t/>\n\t\t\t\t\t<button onClick={setZerosHandler} className=\"create-inheritance-form-button\">\n\t\t\t\t\t\tSet zeros\n\t\t\t\t\t</button>\n\t\t\t\t\t<input type=\"number\" min=\"1\" placeholder=\"Withdrawal delay (weeks)\"\n\t\t\t\t\t\tonChange={weeksChangedHandler} ref={weeksInputElement}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inheritance-form-subsection-div\">\n\t\t\t\t\t<h3 className=\"inheritance-form-heading\">Summary:</h3>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Summary\n\t\t\t\t\t\tproperties={{\n\t\t\t\t\t\t\tassets: assetsSelected,\n\t\t\t\t\t\t\taddresses: addresses,\n\t\t\t\t\t\t\tweeks: weeks\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<h3 className=\"inheritance-form-heading\">Fees:</h3>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<FeesOverview fees={fees} />\n\t\t\t\t</div>\n\t\t\t\t<button onClick={createInheritanceButtonHandler} className=\"create-inheritance-form-button\">\n\t\t\t\t\tCreate inheritance\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default CreateInheritanceForm;\n","import React from \"react\";\n\nimport { Navigate } from \"react-router-dom\";\n\nimport { AppContext } from \"../redux/AppContext\";\n\nimport CreateInheritanceForm from \"../components/CreateInheritanceForm\";\n\nfunction CreateInheritancePage() {\n\n\t// const { state, dispatch } = React.useContext(AppContext);\n\tconst { state } = React.useContext(AppContext);\n\n\tif (!state.wallet.connected) {\n\t\treturn <Navigate to=\"/\" />\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<CreateInheritanceForm />\n\t\t</div>\n\t);\n\n}\n\nexport default CreateInheritancePage;\n","import React, { useState, useRef, useEffect } from \"react\";\n\nimport { Navigate, useSearchParams } from \"react-router-dom\";\n\nimport {\n\tget_box_containing_nft, get_nft_box_balance, IBalanceWithTokens, get_box_to_spend, INFTBox, IUTXOToken\n} from \"../scripts/walletConnector\";\n\nimport {\n\tvalidate_address, create_transaction_owner_withdrawal, sign_tx, submit_tx, INautilusUTXO\n} from \"../scripts/transactionsBuilder\";\n\nimport { ITxSent, TX_SENT_DEFAULT_STATE } from \"../components/CreateInheritanceForm\";\n\nimport AssetsSelected from \"../components/create_inheritance_form/AssetsSelected\";\n\nimport { AppContext } from \"../redux/AppContext\";\n\nimport \"../css/CreateInheritanceForm.css\";\n\nasync function construct_and_sign_withdrawal_transaction(box: INFTBox, address: string): Promise<string | null> {\n\t\n\tconst bx: INautilusUTXO = await get_box_to_spend(box.boxId);\n\tconst tkns: IUTXOToken[] = bx.assets;\n\n\tconst unsigned_tx = await create_transaction_owner_withdrawal(\n\t\taddress,\n\t\tbx,\n\t\tbox.nftId,\n\t\tparseInt(bx.value),\n\t\ttkns\n\t);\n\n\tconst signed_tx = await sign_tx(unsigned_tx);\n\tif (!signed_tx) return null;\n\n\tconst sent_tx = await submit_tx(signed_tx);\n\tif(!sent_tx) return null;\n\n\treturn sent_tx;\n}\n\nfunction InheritanceOwnerPage() {\n\n\tconst { state } = React.useContext(AppContext);\n\n\tconst [inheritanceBalance, setInheritanceBalance] = useState<IBalanceWithTokens>(\n\t\t{\n\t\t\tnanoErgs: 0,\n\t\t\ttokens: []\n\t\t}\n\t);\n\n\tconst [txSent, setTxSent] = useState<ITxSent>(TX_SENT_DEFAULT_STATE);\n\n\tconst withdrawalAddressInputElement = useRef<HTMLInputElement>(null);\n\n\tconst [searchParams] = useSearchParams();\n\n\tconst inheritance_id = searchParams.get(\"id\");\n\n\tuseEffect(() => {\n\t\tif (inheritance_id !== null)\n\t\t\tget_box_containing_nft(inheritance_id).then(result => {\n\t\t\t\tif (result === null)\n\t\t\t\t\treturn (<Navigate to=\"/my-inheritance\" />);\n\t\t\t});\n\t});\n\n\tif (!state.wallet.connected || !state.inheritances.loaded) {\n\t\treturn <Navigate to=\"/\" />\n\t}\n\n\tif (inheritance_id === null || inheritance_id === \"\") {\n\t\treturn <Navigate to=\"/\" />\n\t}\n\n\tif (inheritanceBalance.nanoErgs === 0) {\n\t\tget_nft_box_balance(inheritance_id).then(\n\t\t\t(result: IBalanceWithTokens) => setInheritanceBalance(result)\n\t\t);\n\t}\n\n\tfunction addressesChangedHandler() {\n\n\t}\n\n\tfunction useCurrentAddressHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tif (withdrawalAddressInputElement.current) {\n\t\t\twithdrawalAddressInputElement.current.value = state.wallet.address;\n\t\t\taddressesChangedHandler();\n\t\t}\n\t}\n\n\tfunction withdrawAssetsHandler(e: React.MouseEvent<HTMLElement>) {\n\t\te.preventDefault();\n\t\tif (withdrawalAddressInputElement.current) {\n\t\t\tvalidate_address(withdrawalAddressInputElement.current.value).then((result: boolean) => {\n\t\t\t\tif (result && inheritance_id !== null) {\n\t\t\t\t\tget_box_containing_nft(inheritance_id).then(result => {\n\t\t\t\t\t\tif (result !== null) {\n\t\t\t\t\t\t\tconstruct_and_sign_withdrawal_transaction(result,\n\t\t\t\t\t\t\t\twithdrawalAddressInputElement.current!.value \n\t\t\t\t\t\t\t).then(res => {\n\t\t\t\t\t\t\t\tif(res == null) alert(\"Transaction sending failed!\");\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tsetTxSent({sent: true, txId: res});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\t\t\t\t\talert(\"Invalid withdrawal address!\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tif (txSent.sent) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h3>Transaction&nbsp;\n\t\t\t\t\t<a href={\"https://testnet.ergoplatform.com/en/transactions/\" + txSent.txId}\n\t\t\t\t\t\ttarget=\"_blank\" rel=\"noopener norefferer\">\n\t\t\t\t\t\t{txSent.txId}\n\t\t\t\t\t</a>\n\t\t\t\t &nbsp;was successfully sent! :-)</h3>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\n\t\t<div>\n\n\t\t\t<h2>Inheritance owned by you contains following assets:</h2>\n\n\t\t\t{\n\t\t\t\t(inheritanceBalance.nanoErgs === 0) ?\n\t\t\t\t\t<h2>Loading ...</h2>\n\t\t\t\t\t:\n\t\t\t\t\t<AssetsSelected assets={{\n\t\t\t\t\t\tergs: inheritanceBalance.nanoErgs,\n\t\t\t\t\t\ttokens: inheritanceBalance.tokens\n\t\t\t\t\t}} />\n\t\t\t}\n\n\t\t\t<div className=\"inheritance-form-main-div\">\n\t\t\t\t<h2 className=\"inheritance-form-heading\">Inheritance withdrawal form</h2>\n\t\t\t\t<form action=\"\">\n\n\t\t\t\t\t<div className=\"inheritance-form-subsection-div\">\n\t\t\t\t\t\t<h3 className=\"inheritance-form-heading\">Address:</h3>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"Withdrawal address\"\n\t\t\t\t\t\t\tonChange={addressesChangedHandler} ref={withdrawalAddressInputElement}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button onClick={useCurrentAddressHandler} className=\"create-inheritance-form-button\">\n\t\t\t\t\t\t\tUse current address\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button onClick={withdrawAssetsHandler} className=\"create-inheritance-form-button\">\n\t\t\t\t\t\tWithdraw assets\n\t\t\t\t\t</button>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t</div>\n\t);\n\n}\n\nexport default InheritanceOwnerPage;\n","import React, { useEffect } from \"react\";\n\nimport { Navigate, useSearchParams } from \"react-router-dom\";\n\nimport { get_box_containing_nft } from \"../scripts/walletConnector\";\n\nimport { AppContext } from \"../redux/AppContext\";\n\nfunction InheritanceHeirPage() {\n\n\tconst { state } = React.useContext(AppContext);\n\n\tconst [searchParams] = useSearchParams();\n\n\tconst inheritance_id = searchParams.get(\"id\");\n\t\n\tuseEffect(() => {\n\t\tif(inheritance_id !== null)\n\t\t\tget_box_containing_nft(inheritance_id).then(result => {\n\t\t\t\tif(result === null)\n\t\t\t\t\treturn (<Navigate to=\"/my-inheritance\" />);\n\t\t\t});\n\t});\n\n\tif (!state.wallet.connected || !state.inheritances.loaded) {\n\t\treturn <Navigate to=\"/\" />\n\t}\n\n\tif (inheritance_id === null || inheritance_id === \"\") {\n\t\treturn <Navigate to=\"/\" />\n\t}\n\n\treturn (\n\t\t<div>(HEIR page) {inheritance_id}</div>\n\t);\n\n}\n\nexport default InheritanceHeirPage;\n","import React from 'react';\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\n\nimport { AppProvider } from \"./redux/AppContext\";\n\nimport PageLayout from \"./pages/Layout\";\n\nimport AboutPage from \"./pages/About\";\nimport HomePage from \"./pages/Home\";\nimport HowItWorksPage from \"./pages/HowItWorks\";\nimport MyInheritancePage from \"./pages/MyInheritance\";\nimport CreateInheritancePage from \"./pages/CreateInheritance\";\nimport InheritanceOwnerPage from \"./pages/InheritancesOwner\";\nimport InheritanceHeirPage from \"./pages/InheritanceHeir\";\n\nimport './css/App.css';\n\n// todo fix default route to home maybe???\n\nfunction App() {\n\n    return (\n        <AppProvider>\n            <BrowserRouter>\n                <PageLayout>\n                    <Routes>\n                        <Route path=\"/\" element={<HomePage />} />\n                        <Route path=\"/about\" element={<AboutPage />} />\n                        <Route path=\"/how-it-works\" element={<HowItWorksPage />} />\n                        <Route path=\"/my-inheritance\" element={<MyInheritancePage />} />\n                        <Route path=\"/create-inheritance\" element={<CreateInheritancePage />} />\n                        <Route path=\"/inheritances/owner\" element={<InheritanceOwnerPage />} />\n                        <Route path=\"/inheritances/heir\" element={<InheritanceHeirPage />} />\n                    </Routes>\n                </PageLayout>\n            </BrowserRouter>\n        </AppProvider>\n    );\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './css/index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}